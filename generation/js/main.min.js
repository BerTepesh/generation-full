!function t(e,i,n){function o(a,c){if(!i[a]){if(!e[a]){var s="function"==typeof require&&require;if(!c&&s)return s(a,!0);if(r)return r(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=i[a]={exports:{}};e[a][0].call(u.exports,(function(t){return o(e[a][1][t]||t)}),u,u.exports,t,e,i,n)}return i[a].exports}for(var r="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Engine=void 0;t("./state.js");function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}i.Engine=function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n(this,"states",[]),n(this,"interval",null),n(this,"addState",(function(t){t.id&&e.states.push(t)})),n(this,"init",(function(){console.log("engine.init().."),e.states.forEach((function(t){t.init()})),console.log("engine.init() done")})),n(this,"render",(function(t){console.log("engine.render().."),e.interval=setInterval((function(){e.states.forEach((function(t){0==t.move()&&clearInterval(e.interval)}))}),100/t)})),n(this,"stop",(function(){console.log("engine.stop()"),clearInterval(e.interval)}))}},{"./state.js":5}],2:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Flow=void 0;var n=t("./sprite.js");function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var c=function(){function t(e,i){var r=this;o(this,t),a(this,"id",void 0),a(this,"sprites",[]),a(this,"path",[]),a(this,"parrentState",void 0),a(this,"isMove",!0),a(this,"velocity",void 0),a(this,"tick",void 0),a(this,"addSprite",(function(t){t&&r.sprites.push(t)})),a(this,"addSprites",(function(t,e,i){for(var o=0;o<i;o++)r.sprites.push(new n.Sprite(t,e))})),a(this,"addSpliters",(function(t,e){if(e+1<r.sprites.length)for(var i=0;i<r.sprites.length;i+=e+1)r.sprites.splice(i,1,new n.Sprite(t,r.sprites[1].gutter))})),a(this,"init",(function(){console.log("     flow ".concat(r.id,".init()..")),console.log("         sprites.init().."),r.parrentState.innerHTML+='<div class="flows__item" id="'.concat(r.id,'"></div>');var t=document.getElementById(r.id);if(r.path.length<2)alert("Задан слишком короткий путь!");else{var e={x:r.path[0].x,y:r.path[0].y},i={x:r.path[1].x,y:r.path[1].y};r.sprites.forEach((function(n,o){t.innerHTML+='<span class="'.concat(n.icon,'" id="').concat(r.id,"_").concat(o,'"></span>'),n.id="".concat(r.id,"_").concat(o),e.x>i.x?(n.x=0==o?-n.gutter:n.gutter*(o-1),n.y=r.path[0].y,n.curDirection=2,n.direction=2):e.x<i.x?(n.x=0==o?n.gutter:-n.gutter*(o-1),n.y=r.path[0].y,n.curDirection=0,n.direction=0):e.y>i.y?(n.y=0==o?-n.gutter:n.gutter*(o-1),n.x=r.path[0].x,n.curDirection=3,n.direction=3):e.y<i.y&&(n.y=0==o?n.gutter:-n.gutter*(o-1),n.x=r.path[0].x,n.curDirection=1,n.direction=1)}))}console.log("         sprites.init() done"),console.log("     flow ".concat(r.id,".init() done"))})),a(this,"getPrevPathStep",(function(t){var e=t.pathStep-1;return!(e<0)&&r.path[e]})),a(this,"getNextPathStep",(function(t){var e=t.pathStep+1;return!(e>=r.path.length)&&r.path[e]})),a(this,"move",(function(){r.tick<=0&&(r.sprites.forEach((function(t,e){r.getNextPathStep(t)?0==t.curDirection?(r.getNextPathStep(t).x>=t.x?t.x>=0&&r.transform(t):(t.pathStep++,r.getNextPathStep(t).y>=t.y?t.curDirection=1:t.curDirection=3),t.x++):1==t.curDirection?(r.getNextPathStep(t).y>=t.y?t.y>=0&&r.transform(t,90):(t.pathStep++,r.getNextPathStep(t).x>=t.x?t.curDirection=0:t.curDirection=2),t.y++):2==t.curDirection?(r.getNextPathStep(t).x<=t.x?t.x<0&&r.transform(t,180):(t.pathStep++,r.getNextPathStep(t).y<=t.y?t.curDirection=3:t.curDirection=1),t.x--):3==t.curDirection&&(r.getNextPathStep(t).y<=t.y?t.y<0&&r.transform(t,270):(t.pathStep++,r.getNextPathStep(t).x<=t.x?t.curDirection=2:t.curDirection=0),t.y--):(r.isMove=!1,t.pathStep=0,t.x=r.path[0].x,t.y=r.path[0].y,t.curDirection=t.direction)})),r.tick=r.velocity),r.tick--})),this.path=e,this.velocity=100/i,this.tick=this.velocity}var e,i,c;return e=t,(i=[{key:"transform",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t.el().style.transform="translate(".concat(t.x,"px, ").concat(t.y,"px) rotate(").concat(e,"deg)")}}])&&r(e.prototype,i),c&&r(e,c),t}();i.Flow=c},{"./sprite.js":4}],3:[function(t,e,i){"use strict";var n=t("./engine.js"),o=t("./state.js"),r=t("./flow.js"),a=new r.Flow([{x:0,y:0},{x:174,y:0}],70),c=new r.Flow([{x:0,y:0},{x:144,y:0},{x:144,y:210}],40),s=new r.Flow([{x:19,y:0},{x:19,y:99},{x:157,y:99},{x:157,y:175}],50),l=new r.Flow([{x:21,y:0},{x:21,y:-209},{x:170,y:-209}],40),u=new r.Flow([{x:0,y:0},{x:0,y:-96},{x:135,y:-96},{x:135,y:-155}],30),d=new r.Flow([{x:0,y:0},{x:-275,y:0}],20),f=new r.Flow([{x:0,y:0},{x:195,y:0}],30),p=new r.Flow([{x:0,y:-13},{x:195,y:-13}],30),h=new r.Flow([{x:0,y:0},{x:350,y:0}],40);a.addSprites("icon-recicle-flow",30,6),s.addSprites("icon-couples",40,8),d.addSprites("icon-couples",35,8,8),f.addSprites("icon-flash-other",25,8),p.addSprites("icon-filter-tube",25,8),c.addSprites("icon-recicle-flow",30,12),l.addSprites("icon-smoke",30,12),h.addSprites("icon-burn-flow",35,10),u.addSprites("icon-condensate",30,11),a.addSpliters("split",2),c.addSpliters("split split_waste",2),l.addSpliters("split split_gas",2);var y=new o.State("recicle"),v=new o.State("bunker"),w=new o.State("burn"),x=new o.State("capacitor"),g=new o.State("turbo"),S=new o.State("filter");y.addFlow(a),v.addFlow(c),w.addFlow(s),w.addFlow(l),w.addFlow(h),x.addFlow(u),g.addFlow(d),g.addFlow(f),S.addFlow(p);var b=new n.Engine;b.addState(y),b.addState(v),b.addState(w),b.addState(x),b.addState(g),b.addState(S),b.init(),b.render(20)},{"./engine.js":1,"./flow.js":2,"./state.js":5}],4:[function(t,e,i){"use strict";function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}Object.defineProperty(i,"__esModule",{value:!0}),i.Sprite=void 0;i.Sprite=function t(e,i){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n(this,"id",void 0),n(this,"icon",void 0),n(this,"gutter",void 0),n(this,"pathStep",0),n(this,"curDirection",void 0),n(this,"direction",void 0),n(this,"x",0),n(this,"y",0),n(this,"el",(function(){return document.getElementById(o.id)})),this.icon=e,this.gutter=i}},{}],5:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.State=void 0;t("./flow.js");function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,"flows",[]),o(this,"id",void 0),document.getElementById(e)?this.id=e:console.log("state ".concat(this.id,".init() flow not found"))}var e,i,r;return e=t,(i=[{key:"addFlow",value:function(t){t&&this.flows.push(t)}},{key:"init",value:function(){var t=this;console.log("   state ".concat(this.id,".init()..")),this.flows.forEach((function(e,i){e.id="".concat(t.id,"_").concat(i),e.parrentState=document.getElementById(t.id),e.init()})),console.log("   state ".concat(this.id,".init() done"))}},{key:"move",value:function(){this.flows.forEach((function(t){t.move()}))}}])&&n(e.prototype,i),r&&n(e,r),t}();i.State=r},{"./flow.js":2}]},{},[3]);
//# sourceMappingURL=main.min.js.map
