{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/engine.js","src/js/flow.js","src/js/index.js","src/js/sprite.js","src/js/state.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","Engine","_this","this","_classCallCheck","_defineProperty","_state","id","states","push","console","log","forEach","init","_speed","interval","setInterval","move","clearInterval","_sprite2","Flow","_path","_velocity","_sprite","sprites","_icon","_gutter","_amount","Sprite","_spliter","_each","splice","gutter","concat","parrentState","innerHTML","flowItem","document","getElementById","path","alert","first","x","y","second","index","icon","curDirection","direction","_el","prevSpriteStep","pathStep","nextSpriteStep","tick","el","getNextPathStep","transform","isMove","velocity","_rotate","arguments","undefined","style","_engine","_flow","recicleFlow","wasteFlow","couplesFlow","gasFlow","condensateFlow","couplesFlow2","electricityFlow","ashFlow","slagFlow","addSprites","addSpliters","recicleState","State","bunkerState","burnState","capacitorState","turboState","filterState","addFlow","engine","addState","render","_id","flows"],"mappings":"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","file":"main.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import {State} from './state.js';\r\n\r\nexport class Engine {\r\n  states = [];\r\n  interval = null;\r\n  constructor() {\r\n    \r\n  }\r\n  addState = (_state) => {\r\n    if(_state.id) {\r\n      this.states.push(_state);\r\n    }\r\n  }\r\n  init = () => {\r\n    console.log(\"engine.init()..\");\r\n    this.states.forEach(e => {\r\n      e.init();\r\n    }); \r\n    console.log(\"engine.init() done\");\r\n  }\r\n  render = (_speed) => {\r\n    console.log(\"engine.render()..\");\r\n    this.interval = setInterval(() => {\r\n      this.states.forEach(e => {\r\n        if(e.move() == false) clearInterval(this.interval);\r\n      }); \r\n    }, 100/_speed);\r\n  }\r\n  stop = () => {\r\n    console.log(\"engine.stop()\");\r\n    clearInterval(this.interval);\r\n  }\r\n}","import {Sprite} from './sprite.js';\r\n\r\nexport class Flow {\r\n  id;\r\n  sprites = [];\r\n  path = [];\r\n  parrentState;\r\n  isMove = true;\r\n  velocity;\r\n  tick;\r\n\r\n  constructor(_path, _velocity, _split = 0) {\r\n    this.path = _path;\r\n    this.velocity = 100/_velocity;\r\n    this.tick = this.velocity;\r\n  }\r\n  addSprite = (_sprite) => {\r\n    if(_sprite) {\r\n      this.sprites.push(_sprite);\r\n    }\r\n  }\r\n  addSprites = (_icon, _gutter, _amount) => {\r\n    for(let i = 0; i < _amount; i++) {\r\n      this.sprites.push(new Sprite(_icon, _gutter));\r\n    }\r\n  }\r\n  addSpliters = (_spliter, _each) => {\r\n    if(_each + 1 < this.sprites.length) {\r\n      for (let i = 0; i < this.sprites.length; i+=_each + 1) {\r\n        this.sprites.splice(i, 1, new Sprite(_spliter, this.sprites[1].gutter));\r\n      }\r\n    }\r\n  }\r\n  init = () => {\r\n    console.log(`     flow ${this.id}.init()..`);\r\n    console.log(\"         sprites.init()..\");\r\n    this.parrentState.innerHTML += `<div class=\"flows__item\" id=\"${this.id}\"></div>`;\r\n    const flowItem = document.getElementById(this.id);\r\n\r\n    if(this.path.length < 2) {\r\n      alert('Задан слишком короткий путь!');\r\n    } else {\r\n      const first = { x: this.path[0].x, y: this.path[0].y };\r\n      const second = { x: this.path[1].x, y: this.path[1].y };\r\n\r\n      this.sprites.forEach((e, index) => {\r\n        flowItem.innerHTML += `<span class=\"${e.icon}\" id=\"${this.id}_${index}\"></span>`;\r\n        e.id = `${this.id}_${index}`;\r\n        if(first.x > second.x) { \r\n          if(index == 0) {\r\n            e.x = -e.gutter;\r\n          } else {\r\n            e.x = (e.gutter * (index - 1));\r\n          }\r\n          e.y = this.path[0].y;\r\n          e.curDirection = 2; \r\n          e.direction = 2; \r\n        } else if(first.x < second.x) { \r\n          if(index == 0) {\r\n            e.x = e.gutter;\r\n          } else {\r\n            e.x = -(e.gutter * (index - 1));\r\n          }\r\n          e.y = this.path[0].y;\r\n          e.curDirection = 0; \r\n          e.direction = 0; \r\n        } else if(first.y > second.y) {\r\n          if(index == 0) {\r\n            e.y = -e.gutter;\r\n          } else {\r\n            e.y = (e.gutter * (index - 1));\r\n          }\r\n          e.x = this.path[0].x;\r\n          e.curDirection = 3; \r\n          e.direction = 3; \r\n        } else if(first.y < second.y) { \r\n          if(index == 0) {\r\n            e.y = e.gutter;\r\n          } else {\r\n            e.y = -(e.gutter * (index - 1));\r\n          }\r\n          e.x = this.path[0].x;\r\n          e.curDirection = 1; \r\n          e.direction = 1; \r\n        } \r\n      });\r\n    }\r\n    console.log(\"         sprites.init() done\");\r\n    console.log(`     flow ${this.id}.init() done`);\r\n  }\r\n  getPrevPathStep = (_el) => {\r\n    const prevSpriteStep = _el.pathStep - 1;\r\n    if(prevSpriteStep < 0) {\r\n      return false;\r\n    } \r\n    return this.path[prevSpriteStep];\r\n  }\r\n  getNextPathStep = (_el) => {\r\n    const nextSpriteStep = _el.pathStep + 1;\r\n    if(nextSpriteStep >= (this.path.length)) {\r\n      return false;\r\n    }\r\n    return this.path[nextSpriteStep];    \r\n  }\r\n  transform(_el, _rotate = 0, _mirror = false) {\r\n    if(_mirror) {\r\n      _el.el().style.transform = `translate(${_el.x}px, ${_el.y}px) rotate(${_rotate}deg)`;\r\n    } else {\r\n      _el.el().style.transform = `translate(${_el.x}px, ${_el.y}px) rotate(${_rotate}deg)`;\r\n    }\r\n  }\r\n  move = () => {\r\n    if(this.tick <= 0) {\r\n      this.sprites.forEach((el, index) => {\r\n        if(!this.getNextPathStep(el)) {\r\n          this.isMove = false;\r\n          el.pathStep = 0;\r\n          el.x = this.path[0].x;\r\n          el.y = this.path[0].y;\r\n          el.curDirection = el.direction;\r\n        } else {\r\n          if(el.curDirection == 0) {\r\n            if(this.getNextPathStep(el).x >= el.x) {\r\n              if(el.x >= 0) {  \r\n                this.transform(el);    \r\n              }    \r\n            } else {\r\n              el.pathStep++;\r\n              if(this.getNextPathStep(el).y >= el.y) {\r\n                el.curDirection = 1;\r\n              } else {\r\n                el.curDirection = 3;\r\n              }\r\n            }\r\n            el.x++;\r\n          } else if(el.curDirection == 1) {\r\n            if(this.getNextPathStep(el).y >= el.y) {\r\n              if(el.y >= 0) {\r\n                this.transform(el, 90);  \r\n              } \r\n            } else {\r\n              el.pathStep++;\r\n              if(this.getNextPathStep(el).x >= el.x) {\r\n                el.curDirection = 0;\r\n              } else {\r\n                el.curDirection = 2;\r\n              }\r\n            }\r\n            el.y++;\r\n          } else if(el.curDirection == 2) {\r\n            if(this.getNextPathStep(el).x <= el.x) {\r\n              if(el.x < 0) {\r\n                this.transform(el, 180);  \r\n              }  \r\n            } else {\r\n              el.pathStep++;\r\n              if(this.getNextPathStep(el).y <= el.y) {\r\n                el.curDirection = 3;\r\n              } else {\r\n                el.curDirection = 1;\r\n              }\r\n            }\r\n            el.x--;\r\n          } else if(el.curDirection == 3) {\r\n            if(this.getNextPathStep(el).y <= el.y) {\r\n              if(el.y < 0) {\r\n                this.transform(el, 270);  \r\n              } \r\n            } else {\r\n              el.pathStep++;\r\n              if(this.getNextPathStep(el).x <= el.x) {\r\n                el.curDirection = 2;\r\n              } else {\r\n                el.curDirection = 0;\r\n              }\r\n            }\r\n            el.y--;\r\n          }\r\n        }\r\n      });\r\n      this.tick = this.velocity;\r\n    } \r\n    this.tick--;\r\n  }\r\n}","import {Engine} from './engine.js';\r\nimport {State} from './state.js';\r\nimport {Flow} from './flow.js';\r\n\r\n//Пути\r\nconst reciclePath = [{x: 0, y: 0}, {x: 174, y: 0}],\r\n      wastePath = [{x: 0, y: 0}, {x: 144, y: 0}, {x: 144, y: 210}],\r\n      couplesPath = [{x: 19, y: 0},{x: 19, y: 99}, {x: 157, y: 99},{x: 157,y: 175}],\r\n      gasPath = [{x: 21, y: 0},{x: 21, y: -209}, { x: 170, y: -209}],\r\n      condensatePath = [{x: 0, y: 0}, {x: 0, y: -96}, {x: 135, y: -96},{x: 135, y: -155}],\r\n      couplesPath2 = [{x: 0, y: 0}, {x: -275, y: 0}],\r\n      electricityPath = [{x: 0, y: 0}, {x: 195, y: 0}],\r\n      ashPath = [{x: 0, y: -13},{x: 195, y: -13}],\r\n      slagPath = [{x: 0, y: 0},{x: 350, y: 0}];\r\n\r\n//Создание потоков\r\n//path, velocity(0-100)\r\nconst recicleFlow = new Flow(reciclePath, 70),\r\n      wasteFlow = new Flow(wastePath, 40),\r\n      couplesFlow = new Flow(couplesPath, 50),\r\n      gasFlow = new Flow(gasPath, 40),\r\n      condensateFlow = new Flow(condensatePath, 30),\r\n      couplesFlow2 = new Flow(couplesPath2, 20),\r\n      electricityFlow = new Flow(electricityPath, 30),\r\n      ashFlow = new Flow(ashPath, 30),\r\n      slagFlow = new Flow(slagPath, 40);\r\n\r\n//Наполнение потоков спрайтами\r\n//icon, gutter, amount\r\nrecicleFlow.addSprites('icon-recicle-flow', 30, 6);\r\ncouplesFlow.addSprites('icon-couples', 40, 8);\r\ncouplesFlow2.addSprites('icon-couples', 35, 8, 8);\r\nelectricityFlow.addSprites('icon-flash-other', 25, 8);\r\nashFlow.addSprites('icon-filter-tube', 25, 8);\r\nwasteFlow.addSprites('icon-recicle-flow', 30, 12);\r\ngasFlow.addSprites('icon-smoke', 30, 12);\r\nslagFlow.addSprites('icon-burn-flow', 35, 10);\r\ncondensateFlow.addSprites('icon-condensate', 30, 11);\r\n\r\n//Добавление разделителей\r\n//icon, each\r\nrecicleFlow.addSpliters('split', 2);\r\nwasteFlow.addSpliters('split split_waste', 2);\r\ngasFlow.addSpliters('split split_gas', 2);\r\n\r\n// Создание позиции\r\nconst recicleState = new State('recicle'),\r\n      bunkerState = new State('bunker'),\r\n      burnState = new State('burn'),\r\n      capacitorState = new State('capacitor'),\r\n      turboState = new State('turbo'),\r\n      filterState = new State('filter');\r\n\r\n// Добавление потоков в позиции\r\nrecicleState.addFlow(recicleFlow);\r\nbunkerState.addFlow(wasteFlow);\r\nburnState.addFlow(couplesFlow);\r\nburnState.addFlow(gasFlow);\r\nburnState.addFlow(slagFlow);\r\ncapacitorState.addFlow(condensateFlow);\r\nturboState.addFlow(couplesFlow2);\r\nturboState.addFlow(electricityFlow);\r\nfilterState.addFlow(ashFlow);\r\n\r\n// Создание движка\r\nconst engine = new Engine();\r\n\r\n// Доавление позиции в движок\r\nengine.addState(recicleState);\r\nengine.addState(bunkerState);\r\nengine.addState(burnState);\r\nengine.addState(capacitorState);\r\nengine.addState(turboState);\r\nengine.addState(filterState);\r\n\r\n// Инициализация движка\r\nengine.init();\r\n\r\n// Рендер (скорость 0 - 100)\r\nengine.render(20);\r\n\r\n// console.log(condensateFlow.sprites);\r\n\r\n\r\n\r\n","export class Sprite {\r\n  id;\r\n  icon;\r\n  gutter;\r\n  pathStep = 0;\r\n  curDirection;\r\n  direction;\r\n  x = 0;\r\n  y = 0;\r\n  constructor(_icon, _gutter) {\r\n    this.icon = _icon;\r\n    this.gutter = _gutter;\r\n  }\r\n  el = () => {\r\n    return document.getElementById(this.id);\r\n  }\r\n}","import {Flow} from './flow.js';\r\n\r\nexport class State {\r\n  flows = [];\r\n  id;\r\n  constructor(_id) {\r\n    if(document.getElementById(_id)) {\r\n      this.id = _id;\r\n    } else {\r\n      console.log(`state ${this.id}.init() flow not found`);\r\n    }\r\n  }\r\n  addFlow(_flow) {\r\n    if(_flow) {\r\n      this.flows.push(_flow);\r\n    }\r\n  }\r\n  init() {\r\n    console.log(`   state ${this.id}.init()..`);\r\n    this.flows.forEach((e, index) => {\r\n      e.id = `${this.id}_${index}`;\r\n      e.parrentState = document.getElementById(this.id);\r\n      e.init();\r\n    });\r\n    console.log(`   state ${this.id}.init() done`);\r\n  }\r\n  move() {\r\n    this.flows.forEach(e => {\r\n      e.move();\r\n    });\r\n  }\r\n}"]}